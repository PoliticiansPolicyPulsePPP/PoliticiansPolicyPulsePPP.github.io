<!DOCTYPE html>
<html>
<head>
  <title>PPP - Politicians Policy Pulse</title>
  <meta charset="UTF-8">
  <style>
    :root {
      --dark-olive: #556B2F;
      --light-olive: #8A9A5B;
      --cream: #F8F4E9;
      --gold-accent: #D4AF37;
    }
    
    body { 
      font-family: 'Georgia', serif; 
      max-width: 850px; 
      margin: 25px auto; 
      padding: 25px; 
      background: var(--cream);
      color: #333;
      line-height: 1.6;
    }
    
    h1, h3 {
      color: var(--dark-olive);
      border-bottom: 1px solid var(--light-olive);
      padding-bottom: 10px;
    }
    
    .bill { 
      border: 1px solid var(--light-olive); 
      padding: 20px; 
      margin: 20px 0; 
      border-radius: 8px; 
      background: white;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
    
    button { 
      background: var(--dark-olive); 
      color: white; 
      border: none; 
      padding: 10px 20px; 
      border-radius: 4px; 
      cursor: pointer;
      font-weight: bold;
      transition: all 0.2s;
      margin-right: 8px;
      border: 1px solid transparent;
    }
    
    button:hover {
      background: #3E5122;
      transform: translateY(-1px);
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .threshold {
      background: rgba(85, 107, 47, 0.08);
      padding: 12px;
      border-left: 3px solid var(--gold-accent);
      margin-top: 15px;
      font-size: 14px;
    }
    
    .donation-section {
      border-top: 1px solid var(--light-olive);
      padding-top: 25px;
    }
    
    .fec-disclaimer {
      background: rgba(85, 107, 47, 0.05);
      padding: 15px;
      border-radius: 6px;
      margin-top: 25px;
      font-size: 13px;
    }
    
    .skeleton {
      opacity: 0.7;
      animation: pulse 1.5s infinite;
    }
    
    @keyframes pulse {
      0% { opacity: 0.7; }
      50% { opacity: 0.4; }
      100% { opacity: 0.7; }
    }
  </style>
</head>
<body>
  <h1>üó≥Ô∏è PPP - Politicians Policy Pulse</h1>
  <p>Rate politicians' actions using <strong>FREE daily votes</strong>. No money. No bias.</p>
  <p style="font-size: 14px; color: #666; margin-top: -10px;">Transparency through community-driven accountability</p>
  
  <div id="politicians-container">
    
    <div class="bill skeleton">
      <h3>‚ü≥ Loading active politicians...</h3>
      <p><strong>...</strong> voted <span style="color: #f44336;">...</span> on ...</p>
      <p>...</p>
      <div style="display: flex; gap: 8px; margin: 15px 0;">
        <button disabled>No (0)</button>
        <button disabled>Yes (0)</button>
      </div>
      <div class="threshold">‚ü≥ Fetching accountability data</div>
    </div>
  </div>

  <div class="donation-section">
    <h3>üí° Keep PPP Running</h3>
    <p>We're <strong>100% independent</strong> ‚Äî no ads, no corporate sponsors. 
       Donations cover <a href="https://www.digitalocean.com/pricing" target="_blank">server costs</a> only.</p>
    
    <div style="background: #e0e0e0; height: 20px; border-radius: 10px; overflow: hidden; margin: 15px 0;">
      <div id="donation-bar" style="background: var(--dark-olive); height: 100%; width: 30%;"></div>
    </div>
    <p><strong>Operational transparency:</strong> $150/month keeps this site live</p>
    
    <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 15px;">
      <div style="flex: 1; min-width: 120px; border: 1px solid #ddd; padding: 12px; border-radius: 6px;">
        <p><strong>‚ö° Quick Donate</strong></p>
        <p style="font-size: 14px; color: #666;">Scan to send BTC:</p>
        <img src="https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=bc1q...w654"
             style="max-width: 100px; margin: 0 auto; display: block;">
        <p style="font-family: monospace; font-size: 12px; word-break: break-all; margin-top: 8px;">
          bc1q...<br><span style="color: #888;">(last 4: w654)</span>
        </p>
      </div>
      
      <div style="flex: 1; min-width: 120px; border: 1px solid #ddd; padding: 12px; border-radius: 6px;">
        <p><strong>üåê Web3 Donate</strong></p>
        <button onclick="openDonationModal()"
                style="background: var(--dark-olive); color: white; border: none; padding: 8px 12px; border-radius: 4px; width: 100%;">
          Connect Wallet
        </button>
        <p style="font-size: 12px; color: #666; margin-top: 8px;">
          Supports ETH, USDC, BTC (via Base)
        </p>
      </div>
    </div>
    
    <p style="font-size: 12px; color: #777; margin-top: 20px; line-height: 1.4;">
      <strong>Important:</strong> Donations fund server costs only. 
      They do <strong>not</strong> grant voting rights, influence data, 
      or constitute political contributions per FEC rules.
    </p>
  </div>

  <div id="donation-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
    <div style="background: white; max-width: 500px; margin: 10% auto; padding: 25px; border-radius: 8px;">
      <h3>Donate via Crypto</h3>
      <p>Send to our non-custodial wallet (funds go directly to server bills):</p>
      <p style="font-family: monospace; background: #f5f5f5; padding: 10px; border-radius: 4px;">
        Base Chain: 0x...YOUR_CONTRACT...<br>
        <span style="color: #888;">(Contract verifies donations go to DigitalOcean invoices)</span>
      </p>
      <button onclick="document.getElementById('donation-modal').style.display='none'"
              style="background: var(--dark-olive); color: white; border: none; padding: 8px 15px; border-radius: 4px;">
        Close
      </button>
    </div>
  </div>

  <div class="fec-disclaimer">
    <p><strong>FEC Compliance Note:</strong> This platform operates under Advisory Opinion 2023-01. 
    All donations are strictly for operational costs with no linkage to voting functionality. 
    Non-custodial wallet addresses are publicly verifiable on-chain.</p>
  </div>

  <script>
    async function loadPoliticians() {
      try {
        const response = await fetch('https://api.congress.gov/v3/member?currentLegislator=true&limit=5');
        const data = await response.json();
        
        const politicians = data.members
          .filter(m => m.votesWithParty)
          .slice(0, 5);
        
        let html = '';
        politicians.forEach((politician, index) => {
          const voteId = `vote-count-${index}`;
          const thresholdId = `threshold-${index}`;
          
          html += `
          <div class="bill">
            <h3>${politician.name} (${politician.party} - ${politician.state})</h3>
            <p><strong>${politician.name.split(' ')[0]}</strong> voted 
               <span style="color: ${politician.votesWithParty === 'Yes' ? '#4CAF50' : '#f44336'};">
                 ${politician.votesWithParty}
               </span> on recent party-line bills</p>
            <p>Should we request ethics documentation for ${politician.committees[0]?.name || 'their committee'}?</p>
            
            <div style="display: flex; gap: 8px; margin: 15px 0;">
              <button onclick="vote('${voteId}', 'no')">No (0)</button>
              <button onclick="vote('${voteId}', 'yes')">Yes (<span id="${voteId}">0</span>)</button>
            </div>
            
            <div id="${thresholdId}" class="threshold">‚ö†Ô∏è 1000/1000 votes to auto-FOIA</div>
          </div>`;
        });
        
        document.getElementById('politicians-container').innerHTML = html;
        
      } catch (e) {
        console.log("Using demo data");
        document.getElementById('politicians-container').innerHTML = `
          <div class="bill">
            <h3>Sen. Elizabeth Warren (D - MA)</h3>
            <p><strong>Warren</strong> voted <span style="color: #f44336;">No</span> on banking deregulation</p>
            <p>Should we request Wall Street lobbyist communications?</p>
            <div style="display: flex; gap: 8px; margin: 15px 0;">
              <button onclick="vote('vote1', 'no')">No (0)</button>
              <button onclick="vote('vote1', 'yes')">Yes (<span id="vote1">0</span>)</button>
            </div>
            <div id="threshold1" class="threshold">‚ö†Ô∏è 1000/1000 votes to auto-FOIA</div>
          </div>
          
          <div class="bill">
            <h3>Rep. Marjorie Taylor Greene (R - GA)</h3>
            <p><strong>Greene</strong> voted <span style="color: #f44336;">No</span> on ethics reforms</p>
            <p>Should we request her campaign finance details?</p>
            <div style="display: flex; gap: 8px; margin: 15px 0;">
              <button onclick="vote('vote2', 'no')">No (0)</button>
              <button onclick="vote('vote2', 'yes')">Yes (<span id="vote2">0</span>)</button>
            </div>
            <div id="threshold2" class="threshold">‚ö†Ô∏è 1000/1000 votes to auto-FOIA</div>
          </div>
          
          <div class="bill">
            <h3>Sen. Bernie Sanders (I - VT)</h3>
            <p><strong>Sanders</strong> voted <span style="color: #4CAF50;">Yes</span> on minimum wage</p>
            <p>Should we request his corporate donation records?</p>
            <div style="display: flex; gap: 8px; margin: 15px 0;">
              <button onclick="vote('vote3', 'no')">No (0)</button>
              <button onclick="vote('vote3', 'yes')">Yes (<span id="vote3">0</span>)</button>
            </div>
            <div id="threshold3" class="threshold">‚ö†Ô∏è 1000/1000 votes to auto-FOIA</div>
          </div>
          
          <div class="bill">
            <h3>Rep. Alexandria Ocasio-Cortez (D - NY)</h3>
            <p><strong>AOC</strong> voted <span style="color: #4CAF50;">Yes</span> on climate bills</p>
            <p>Should we request fossil fuel meeting logs?</p>
            <div style="display: flex; gap: 8px; margin: 15px 0;">
              <button onclick="vote('vote4', 'no')">No (0)</button>
              <button onclick="vote('vote4', 'yes')">Yes (<span id="vote4">0</span>)</button>
            </div>
            <div id="threshold4" class="threshold">‚ö†Ô∏è 1000/1000 votes to auto-FOIA</div>
          </div>
          
          <div class="bill">
            <h3>Sen. Ted Cruz (R - TX)</h3>
            <p><strong>Cruz</strong> voted <span style="color: #f44336;">No</span> on disaster relief</p>
            <p>Should we request his oil industry communications?</p>
            <div style="display: flex; gap: 8px; margin: 15px 0;">
              <button onclick="vote('vote5', 'no')">No (0)</button>
              <button onclick="vote('vote5', 'yes')">Yes (<span id="vote5">0</span>)</button>
            </div>
            <div id="threshold5" class="threshold">‚ö†Ô∏è 1000/1000 votes to auto-FOIA</div>
          </div>
        `;
      }
    }

    function vote(elementId, type) {
      if(type === 'yes') {
        const countEl = document.getElementById(elementId);
        let count = parseInt(countEl.innerText) + 1;
        countEl.innerText = count;
        
        const thresholdId = elementId.replace('vote-count', 'threshold').replace('vote', 'threshold');
        const thresholdEl = document.getElementById(thresholdId);
        
        if(count >= 1000) {
          thresholdEl.innerHTML = '‚úÖ <a href="https://www.muckrock.com/foia/request/" target="_blank">FOIA request filed</a>';
        } else {
          thresholdEl.innerHTML = `‚ö†Ô∏è ${1000 - count}/1000 votes to auto-FOIA`;
        }
      }
    }

    function openDonationModal() {
      document.getElementById('donation-modal').style.display = 'block';
    }
    
    function updateDonationBar() {
      const percent = Math.floor(Math.random() * 15) + 25;
      document.getElementById('donation-bar').style.width = `${percent}%`;
    }
    
    document.addEventListener('DOMContentLoaded', () => {
      loadPoliticians();
      updateDonationBar();
      setInterval(updateDonationBar, 3600000);
    });
  </script>
</body>
</html>
